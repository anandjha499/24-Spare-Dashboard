<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>24Spare Sales Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 20px;
      background: linear-gradient(135deg, #f5f7fb 0%, #c3cfe2 100%);
      color: #1f2933;
      min-height: 100vh;
    }
    h1 {
      color: #2563eb;
      text-align: center;
      margin-bottom: 30px;
      font-size: 2.5em;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    h2 {
      color: #2563eb;
      margin-bottom: 15px;
      font-size: 1.5em;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }
    .panel {
      background: #ffffff;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(15,23,42,0.15);
      flex: 1 1 450px;
      min-width: 300px;
      border: 1px solid #e5e7eb;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .panel:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(15,23,42,0.2);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #e5e7eb;
      padding: 10px;
      font-size: 14px;
      text-align: left;
    }
    th {
      background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
      color: #374151;
      font-weight: 600;
    }
    input {
      width: 100%;
      box-sizing: border-box;
      background: #f9fafb;
      border: 1px solid #d1d5db;
      color: #111827;
      padding: 8px 12px;
      border-radius: 6px;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }
    input:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 2px rgba(37,99,235,0.25);
    }
    button {
      background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
      color: #ffffff;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      margin: 20px auto;
      display: block;
      font-weight: 600;
      font-size: 16px;
      transition: background 0.3s ease, transform 0.3s ease;
    }
    button:hover {
      background: linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%);
      transform: scale(1.05);
    }
    canvas {
      background: #ffffff;
      border-radius: 8px;
      max-width: 100%;
      height: auto !important;
    }
    .icon {
      color: #2563eb;
    }
    @media (max-width: 768px) {
      .container {
        flex-direction: column;
      }
      .panel {
        flex: 1 1 100%;
      }
    }
  </style>
</head>
<body>
  <h1><i class="fas fa-chart-line icon"></i> 24Spare Sales Dashboard</h1>

  <!-- CHARTS SECTION (Dashboard First) -->
  <div class="container">
    <div class="panel">
      <h2><i class="fas fa-pie-chart icon"></i> Sales by Category</h2>
      <canvas id="catChart" height="220"></canvas>
    </div>
    <div class="panel">
      <h2><i class="fas fa-chart-bar icon"></i> Agent Performance (Total Sales)</h2>
      <canvas id="agentChart" height="220"></canvas>
    </div>
    <div class="panel">
      <h2><i class="fas fa-bullseye icon"></i> Agent Target Achievement %</h2>
      <canvas id="targetChart" height="220"></canvas>
    </div>
    <div class="panel">
      <h2><i class="fas fa-warehouse icon"></i> Inventory Levels</h2>
      <canvas id="invChart" height="220"></canvas>
    </div>
  </div>

  <!-- UPDATE SECTION (Parameters at the End) -->
  <div class="container" style="margin-top: 40px;">
    <!-- Sales by Category -->
    <div class="panel">
      <h2><i class="fas fa-tags icon"></i> Sales by Category (₹)</h2>
      <table id="tblSalesCat">
        <tr><th>Category</th><th>Sales Amount</th></tr>
        <tr><td>Engine Oil</td><td><input type="number" value="68400" /></td></tr>
        <tr><td>Coolant</td><td><input type="number" value="13400" /></td></tr>
        <tr><td>Gear Oil</td><td><input type="number" value="29800" /></td></tr>
        <tr><td>New Parts</td><td><input type="number" value="153000" /></td></tr>
      </table>
    </div>

    <!-- Agent Performance -->
    <div class="panel">
      <h2><i class="fas fa-users icon"></i> Agent Performance</h2>
      <table id="tblAgents">
        <tr>
          <th>Agent Name</th>
          <th>Total Sales (₹)</th>
          <th>No. of Transactions</th>
          <th>Target (₹)</th>
        </tr>
        <tr>
          <td><input value="Rajesh Kumar" /></td>
          <td><input type="number" value="88300" /></td>
          <td><input type="number" value="4" /></td>
          <td><input type="number" value="80000" /></td>
        </tr>
        <tr>
          <td><input value="Priya Singh" /></td>
          <td><input type="number" value="69800" /></td>
          <td><input type="number" value="3" /></td>
          <td><input type="number" value="80000" /></td>
        </tr>
        <tr>
          <td><input value="Amit Patel" /></td>
          <td><input type="number" value="64000" /></td>
          <td><input type="number" value="3" /></td>
          <td><input type="number" value="80000" /></td>
        </tr>
        <tr>
          <td><input value="Vikram Singh" /></td>
          <td><input type="number" value="42500" /></td>
          <td><input type="number" value="2" /></td>
          <td><input type="number" value="80000" /></td>
        </tr>
      </table>
    </div>

    <!-- Product Inventory -->
    <div class="panel">
      <h2><i class="fas fa-boxes icon"></i> Product Inventory Status</h2>
      <table id="tblInventory">
        <tr>
          <th>Product Name</th>
          <th>Category</th>
          <th>Stock Qty</th>
        </tr>
        <tr>
          <td><input value="Synthetic 10W-40" /></td>
          <td><input value="Engine Oil" /></td>
          <td><input type="number" value="200" /></td>
        </tr>
        <tr>
          <td><input value="Semi-Synthetic 15W-40" /></td>
          <td><input value="Engine Oil" /></td>
          <td><input type="number" value="150" /></td>
        </tr>
        <tr>
          <td><input value="Synthetic 5W-30" /></td>
          <td><input value="Engine Oil" /></td>
          <td><input type="number" value="100" /></td>
        </tr>
        <tr>
          <td><input value="Premium Red Coolant" /></td>
          <td><input value="Coolant" /></td>
          <td><input type="number" value="120" /></td>
        </tr>
        <tr>
          <td><input value="Standard Blue Coolant" /></td>
          <td><input value="Coolant" /></td>
          <td><input type="number" value="180" /></td>
        </tr>
        <tr>
          <td><input value="ATF Transmission Oil" /></td>
          <td><input value="Gear Oil" /></td>
          <td><input type="number" value="95" /></td>
        </tr>
        <tr>
          <td><input value="Gear Oil 90" /></td>
          <td><input value="Gear Oil" /></td>
          <td><input type="number" value="140" /></td>
        </tr>
        <tr>
          <td><input value="Air Filter" /></td>
          <td><input value="New Parts" /></td>
          <td><input type="number" value="300" /></td>
        </tr>
        <tr>
          <td><input value="Spark Plugs" /></td>
          <td><input value="New Parts" /></td>
          <td><input type="number" value="250" /></td>
        </tr>
        <tr>
          <td><input value="Battery 12V" /></td>
          <td><input value="New Parts" /></td>
          <td><input type="number" value="60" /></td>
        </tr>
      </table>
    </div>
  </div>

  <button onclick="updateDashboard()"><i class="fas fa-sync-alt"></i> Update Dashboard</button>

  <script>
    let catChart, agentChart, targetChart, invChart;

    function getSalesByCategory() {
      const table = document.getElementById('tblSalesCat');
      const labels = [], data = [];
      for (let i = 1; i < table.rows.length; i++) {
        const cells = table.rows[i].cells;
        labels.push(cells[0].innerText);
        data.push(parseFloat(cells[1].querySelector('input').value) || 0);
      }
      return { labels, data };
    }

    function getAgentData() {
      const table = document.getElementById('tblAgents');
      const names = [], sales = [], targets = [];
      for (let i = 1; i < table.rows.length; i++) {
        const cells = table.rows[i].cells;
        names.push(cells[0].querySelector('input').value || '');
        sales.push(parseFloat(cells[1].querySelector('input').value) || 0);
        targets.push(parseFloat(cells[3].querySelector('input').value) || 0);
      }
      return { names, sales, targets };
    }

    function getInventoryData() {
      const table = document.getElementById('tblInventory');
      const labels = [], qty = [];
      for (let i = 1; i < table.rows.length; i++) {
        const cells = table.rows[i].cells;
        labels.push(cells[0].querySelector('input').value || '');
        qty.push(parseFloat(cells[2].querySelector('input').value) || 0);
      }
      return { labels, qty };
    }

    function updateDashboard() {
      const cat = getSalesByCategory();
      const ag = getAgentData();
      const inv = getInventoryData();

      // Sales by Category chart
      if (catChart) catChart.destroy();
      catChart = new Chart(document.getElementById('catChart'), {
        type: 'pie',
        data: {
          labels: cat.labels,
          datasets: [{
            data: cat.data,
            backgroundColor: ['#2563eb', '#10b981', '#f97316', '#ef4444']
          }]
        },
        options: { plugins: { legend: { labels: { color: '#374151' } } } }
      });

      // Agent Sales chart
      if (agentChart) agentChart.destroy();
      agentChart = new Chart(document.getElementById('agentChart'), {
        type: 'bar',
        data: {
          labels: ag.names,
          datasets: [{
            label: 'Total Sales (₹)',
            data: ag.sales,
            backgroundColor: '#2563eb'
          }]
        },
        options: {
          scales: {
            x: { ticks: { color: '#4b5563' } },
            y: { ticks: { color: '#4b5563' } }
          },
          plugins: { legend: { labels: { color: '#374151' } } }
        }
      });

      // Agent Target Achievement %
      const achievement = ag.sales.map((s, i) => {
        const t = ag.targets[i] || 1;
        return Math.round((s / t) * 100);
      });
      if (targetChart) targetChart.destroy();
      targetChart = new Chart(document.getElementById('targetChart'), {
        type: 'bar',
        data: {
          labels: ag.names,
          datasets: [{
            label: 'Achievement %',
            data: achievement,
            backgroundColor: '#f97316'
          }]
        },
        options: {
          scales: {
            x: { ticks: { color: '#4b5563' } },
            y: { ticks: { color: '#4b5563' } }
          },
          plugins: { legend: { labels: { color: '#374151' } } }
        }
      });

      // Inventory chart
      if (invChart) invChart.destroy();
      invChart = new Chart(document.getElementById('invChart'), {
        type: 'bar',
        data: {
          labels: inv.labels,
          datasets: [{
            label: 'Stock Qty',
            data: inv.qty,
            backgroundColor: '#10b981'
          }]
        },
        options: {
          scales: {
            x: { ticks: { color: '#4b5563', autoSkip: false, maxRotation: 60, minRotation: 30 } },
            y: { ticks: { color: '#4b5563' } }
          },
          plugins: { legend: { labels: { color: '#374151' } } }
        }
      });
    }

    // initial draw
    updateDashboard();
  </script>
</body>
</html>
